#!/usr/bin/env ruby
require 'rubygems'
require 'sidekiq'

require_relative '../lib/migration/worker/openstack_amazon_migrator'
require_relative '../lib/migration/worker/openstack_openstack_migrator'
require_relative '../lib/migration/config'
require_relative '../lib/migration/worker'

Sidekiq.configure_client do |c|
  c.redis = { :namespace => Migration::Worker.config.namespace, :url => Migration::Worker.config.redis_url, queue: Migration::Worker.config.queue }
end

Sidekiq::Client.push('queue' => 'cyfronet', 'class' => Migration::Worker::AmazonExporter, 'args' => [])
Sidekiq::Client.push('queue' => 'cyfronet', 'class' => Migration::Worker::OpenstackExporter, 'args' => [])
